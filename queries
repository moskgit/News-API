--This is just a spare file.

SELECT 
    a.author,
    a.title,
    a.article_id,
    a.topic,
    a.created_at,
    a.votes,
    a.article_img_url, 
    
    (SELECT count(comment_id) comment_count FROM comments 
    WHERE article_id = a.article_id GROUP BY article_id)
    
    FROM  articles a
    JOIN comments c ON a.article_id = c.article_id 
    --WHERE a.article_id = 1
    ORDER BY created_at DESC;


--SELECT count(comment_id) total_comments FROM comments WHERE article_id = 18 GROUP BY article_id;

SELECT a.article_id, c.comment_id, c.created_at FROM comments c 
JOIN articles a 
ON c.article_id = a.article_id
WHERE c.article_id = 1
ORDER BY c.created_at DESC;

//
SELECT 
    c.comment_id,
    c.votes,
    c.created_at,
    c.author,
    c.body,
    a.article_id

FROM comments c 
    JOIN articles a 
    ON c.article_id = a.article_id
    WHERE c.article_id = $1
    ORDER BY c.created_at DESC;`, [articleId]

--//07 post
--
`SELECT  
    u.username, 
    a.article_id, 
    c.comment_id,
FROM users u 
JOIN articles a 
ON u.username = a.author 
JOIN comments c 
ON a.article_id = c.article_id 
WHERE a.article_id = $1;`, [article_id]

--list of columns in comments table
    comment_id,
    body,
    article_id,
    author,
    votes,
    created_at

    `INSERT INTO comments (body, article_id, author, votes, created_at)
            VALUES ($1, $2, $3, $4, $5) RETURNING *;`, [body, article_id, author, 1, now()];

    //delete query
    DELETE FROM comments WHERE comment_id > 18;

    //alter sequence
    ALTER SEQUENCE comments_comment_id_seq RESTART WITH 19;

//update
`UPDATE articles SET votes = (
    (SELECT votes FROM articles WHERE article_id = ${article_id}) + ${inc_votes}
    ) WHERE article_id = ${article_id} RETURNING *;`)